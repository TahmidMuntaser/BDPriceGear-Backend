name: DISABLED - Use Render APScheduler Insteadname: Hourly Product Scraping



on: []  # Disabled - no triggerson:

  schedule:

jobs:    # Run every hour at minute 0 (0 0 * * *)

  disabled:    - cron: '0 * * * *'

    runs-on: ubuntu-latest  # Allow manual trigger

    steps:  workflow_dispatch:

      - name: This workflow is disabled

        run: echo "GitHub Actions not needed - using Render APScheduler for hourly updates"jobs:

  scrape:
    runs-on: ubuntu-latest
    container:
      image: mcr.microsoft.com/playwright:v1.54.0-jammy
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.13'
      
      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      - name: Run scraping
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          DJANGO_SETTINGS_MODULE: core.settings
          PLAYWRIGHT_BROWSERS_PATH: 0
        run: |
          cd bdpricegear-backend
          python manage.py populate_products --limit 30
      
      - name: ✅ Scraping completed successfully
        if: success()
        run: echo "Scraping completed successfully"
      
      - name: ❌ Scraping failed
        if: failure()
        run: echo "Scraping failed - check logs"
